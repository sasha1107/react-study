import {
    Alert,
    AlertIcon,
    AlertTitle,
    AlertDescription,
} from '@chakra-ui/react';
import { WhiteCard, ColorCard, DeepDive, Highlight, CodeBlock, Pitfall, RedCard, AlertBanner } from '@app/components';

# ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•˜ê¸°

ë°ì´í„° ëª¨ìŒìœ¼ë¡œë¶€í„° ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ í‘œì‹œí•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°°ì—´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ë°°ì—´ì„ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤. ì´ í˜ì´ì§€ì—ì„œëŠ” `filter()`ì™€ `map()`ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ë°°ì—´ì„ í•„í„°ë§í•˜ê³  ì»´í¬ë„ŒíŠ¸ ë°°ì—´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.

## ë°°ì—´ì—ì„œ ë°ì´í„° ë Œë”ë§ `map()`

ëŒ“ê¸€ ëª©ë¡ì—ì„œ í”„ë¡œí•„ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ì— ì´ë¥´ê¸°ê¹Œì§€ UIë¥¼ êµ¬ì¶•í•  ë•Œ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼ ì»´í¬ë„ŒíŠ¸ì˜ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í‘œì‹œí•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

ì´ëŸ¬í•œ ìƒí™©ì—ì„œ ë°ì´í„°ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´, ,ë°°ì—´ì— ì €ì¥í•˜ê³  `filter()`ì™€ `map()` ì™€ ê°™ì€ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤.

### STEP 0: ì´ëŸ° ì½”ë“œê°€ ìˆë‹¤.

<CodeBlock lang='html'>
    {`<ul>
  <li>Creola Katherine Johnson: mathematician</li>
  <li>Mario JosÃ© Molina-Pasquel HenrÃ­quez: chemist</li>
  <li>Mohammad Abdus Salam: physicist</li>
  <li>Percy Lavon Julian: chemist</li>
  <li>Subrahmanyan Chandrasekhar: astrophysicist</li>
</ul>`}
</CodeBlock>

### STEP 1: ë°ì´í„°ë¥¼ ë°°ì—´ë¡œ ì´ë™

<CodeBlock lang='javascript'>
    {`const people = [
    'Creola Katherine Johnson: mathematician',
    'Mario JosÃ© Molina-Pasquel HenrÃ­quez: chemist',
    'Mohammad Abdus Salam: physicist',
    'Percy Lavon Julian: chemist',
    'Subrahmanyan Chandrasekhar: astrophysicist'
];`}
</CodeBlock>

### STEP 2: Mapìœ¼ë¡œ ëŒë¦°ë‹¤.

<CodeBlock lang='javascript'>
    {`const listItems = people.map(person => <li>{person}</li>);`}
</CodeBlock>

### STEP 3: `<ul>`ë¡œ ê°ì‹¸ì§„ `listItems`ë¥¼ ë°˜í™˜í•œë‹¤.

<CodeBlock lang='javascript'>{`return <ul>{listItems}</ul>;`}</CodeBlock>

<WhiteCard title="Keeping list items in order with `key`">
  <Alert status='error'>
      <AlertIcon />
      <AlertTitle>Warning: </AlertTitle>
      <AlertDescription>
          Each child in a list should have a unique â€œkeyâ€ prop.
      </AlertDescription>
  </Alert>
  <br />
  `key` propì´ ì—†ìœ¼ë©´ ì½˜ì†”ì— ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ëœ° ê²ƒì´ë‹¤.

  <b>ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” ë¬¸ìì—´ ë˜ëŠ” ìˆ«ì</b>ë¥¼ ë°°ì—´ itemì˜ keyë¡œ ì œê³µí•´ì•¼ í•œë‹¤.

  <CodeBlock lang='html'>
  {`<li key={person.id}>...</li>`}
  </CodeBlock>

  `key`ëŠ” ê° ì»´í¬ë„ŒíŠ¸ê°€ ëŒ€ì‘í•˜ëŠ” ë°°ì—´ itemì„ ì•Œë ¤ì¤ë‹ˆë‹¤.

  ì´ëŠ” ë‚˜ì¤‘ì— ë°°ì—´ì´ ì‚½ì…ë˜ê±°ë‚˜ ì‚­ì œë˜ê±°ë‚˜ ì •ë ¬ëœë‹¤ë©´ ì¤‘ìš”í•´ì§„ë‹¤.

  ì˜ ì„ íƒëœ(well-chosen) `key`ëŠ” ë¦¬ì•¡íŠ¸ë¡œ í•˜ì—¬ê¸ˆ ë¬´ìŠ¨ì¼ì´ ì¼ì–´ë‚¬ëŠ”ì§€ ì¶”ë¡ í•˜ê³ , ë” íŠ¸ë¦¬ë¥¼ ì •í™•í•˜ê²Œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

  `key`ëŠ” map ëŒë¦´ ë•Œ ì¦‰ì„ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒë³´ë‹¤, data ì•ˆì— í¬í•¨ì‹œì¼œì•¼ í•œë‹¤.

  <CodeBlock lang='javascript'>
  {`export const people = [{
    id: 0, // Used in JSX as a key
    name: 'Creola Katherine Johnson',
    profession: 'mathematician',
    accomplishment: 'spaceflight calculations',
    imageId: 'MK3eW3A'
    }, {
    id: 1, // Used in JSX as a key
    name: 'Mario JosÃ© Molina-Pasquel HenrÃ­quez',
    profession: 'chemist',
    accomplishment: 'discovery of Arctic ozone hole',
    imageId: 'mynHUSa'
    }, {
    id: 2, // Used in JSX as a key
    name: 'Mohammad Abdus Salam',
    profession: 'physicist',
    accomplishment: 'electromagnetism theory',
    imageId: 'bE7W1ji'
  }];`}
  </CodeBlock>
</WhiteCard>

## ë°°ì—´ì—ì„œ ë°ì´í„° í•„í„°ë§ `filter()`

### STEP 0: ì´ëŸ° ë°ì´í„°ê°€ ìˆë‹¤.

<CodeBlock lang='javascript'>
{`const people = [{
  id: 0,
  name: 'Creola Katherine Johnson',
  profession: 'mathematician',
}, {
  id: 1,
  name: 'Mario JosÃ© Molina-Pasquel HenrÃ­quez',
  profession: 'chemist',
}, {
  id: 2,
  name: 'Mohammad Abdus Salam',
  profession: 'physicist',
}, {
  name: 'Percy Lavon Julian',
  profession: 'chemist',  
}, {
  name: 'Subrahmanyan Chandrasekhar',
  profession: 'astrophysicist',
}];`}
</CodeBlock>

ì—¬ê¸°ì„œ ì§ì—…ì´ `chemist`ì¸ ì‚¬ëŒë“¤ë§Œ í™”ë©´ì— ì¶œë ¥í•˜ê¸°ë¥¼ ì›í•œë‹¤.

### STEP 1: ì§ì—…ì´ `chemist`ì¸ ì‚¬ëŒë“¤ë§Œ ë°ì´í„°ì—ì„œ ë½‘ì•„ì™€ `chemists`ë¼ëŠ” ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“ ë‹¤.

<CodeBlock lang='javascript'>
{`const chemists = people.filter(person =>
  person.profession === 'chemist'
);`}
</CodeBlock>

### STEP 2: Mapìœ¼ë¡œ ëŒë¦°ë‹¤.


<CodeBlock lang='javascript'>
{`const listItems = chemists.map(person =>
  <li>
     <img
       src={getImageUrl(person)}
       alt={person.name}
     />
     <p>
       <b>{person.name}:</b>
       {' ' + person.profession + ' '}
       known for {person.accomplishment}
     </p>
  </li>
);`}
</CodeBlock>

### STEP 3: `<ul>`ë¡œ ê°ì‹¸ì§„ `listItems`ë¥¼ ë°˜í™˜í•œë‹¤.

<CodeBlock lang='javascript'>{`return <ul>{listItems}</ul>;`}</CodeBlock>

<Pitfall title="í•¨ì •">
  - í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” `=>` ë°”ë¡œ ë’¤ì— í‘œí˜„ì‹ì„ ì•”ì‹œì ìœ¼ë¡œ ë°˜í™˜í•˜ë¯€ë¡œ `return` ë¬¸ì´ í•„ìš” ì—†ìŒ.
  <CodeBlock lang='javascript'>
  {`const listItems = chemists.map(person =>
      <li>...</li> // Implicit return!
  );`}
  </CodeBlock>
  
  - ê·¸ëŸ¬ë‚˜ ë’¤ì— ì¤‘ê´„í˜¸ê°€ ì˜¤ëŠ” ê²½ìš° ëª…ì‹œì ìœ¼ë¡œ `return`ì„ ì‘ì„±í•´ì•¼ í•œë‹¤. (ë‘ ì¤„ ì´ìƒ)
  <CodeBlock lang='javascript'>
  {`const listItems = chemists.map(person => { // Curly brace
      return <li>...</li>;
  })`}
  </CodeBlock>
</Pitfall>


## `key`ğŸ”‘

### `key`ë¥¼ ì–´ë””ì„œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆê¹Œ?

-   ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°
    -   ë„ˆì˜ ë°ì´í„°ê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì˜¤ëŠ” ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì˜ uniqueí•œ ê¸°ë³¸í‚¤(PK)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
-   ë¡œì»¬ì—ì„œ ìƒì„±ëœ ë°ì´í„°
    -   ë°ì´í„°ê°€ ë¡œì»¬ì—ì„œ ìƒì„±ë˜ê³  ìœ ì§€ë˜ëŠ” ê²½ìš°(ex. ë©”ëª¨ ì‘ì„± ì•±ì˜ ë©”ëª¨) ë‹¤ìŒê³¼ ê°™ì€ incrementing counterë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        -   [`crypto: randomUUID()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID)
        -   [`uuid`](https://www.npmjs.com/package/uuid)

### `key` ê·œì¹™

-   í‚¤ëŠ” í˜•ì œ ê°„ì— unique í•´ì•¼ í•œë‹¤.
    -   ë‹¤ë¥¸ ë°°ì—´ì—ì„œëŠ” ë™ì¼í•œ í‚¤ë¥¼ ì‚¬ìš©í•´ë„ ê´œì°®ë‹¤.
-   í‚¤ëŠ” ë³€ê²½ë˜ì–´ì„œëŠ” ì•ˆëœë‹¤.
-   í‚¤ë¥¼ ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ìƒì„±í•˜ì§€ ë§ˆì„¸ìš”.
    -   ì˜ˆ) `key={Math.random()}`
    -   ë Œë”ë§ ê°„ì— í‚¤ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì™€ ë”ì´ ë§¤ë²ˆ ë‹¤ì‹œ ìƒì„±ëœë‹¤.
    -   ëŠë¦´ ë¿ë§Œ ì•„ë‹ˆë¼ ëª©ë¡ í•­ëª© ë‚´ë¶€ì˜ ì‚¬ìš©ì ì…ë ¥ë„ ìƒê²Œ ëœë‹¤.
        => ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•ˆì •ì ì¸ idë¥¼ ì‚¬ìš©í•  ê²ƒ!

### ë¦¬ì•¡íŠ¸ì— `key`ê°€ í•„ìš”í•œ ì´ìœ ëŠ”?

keyë¥¼ í†µí•´ í˜•ì œ ê°„ì— í•­ëª©ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¬ì •ë ¬ë¡œ ì¸í•´ ìœ„ì¹˜ê°€ ë³€ê²½ë˜ë”ë¼ë„ `key`ëŠ” ë¦¬ì•¡íŠ¸ë¡œ í•˜ì—¬ê¸ˆ ì•„ì´í…œì„ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
<Pitfall title='ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ keyë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ë‚˜ìš”?'>
ì‚¬ì‹¤ `key`ë¥¼ ì§€ì •í•´ì£¼ì§€ ì•Šìœ¼ë©´, ë¦¬ì•¡íŠ¸ëŠ” ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ keyë¡œ ì‚¬ìš©í•œë‹¤.

í•˜ì§€ë§Œ ë°°ì—´ì— í•­ëª©ì´ ì‚½ì…ë˜ê±°ë‚˜ ì‚­ì œë˜ê±°ë‚˜ ì¬ì •ë ¬ë˜ëŠ” ê²½ìš°, í•­ëª©ì„ ë Œë”ë§í•˜ëŠ” ìˆœì„œê°€ ë³€ê²½ëœë‹¤.

ê·¸ë˜ì„œ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ keyë¡œ ì‚¬ìš©í•˜ë©´ ì¢…ì¢… í˜¼ë€ìŠ¤ëŸ¬ìš´ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.

ë˜í•œ `key`ëŠ” propsë¡œ ì „ë‹¬ë˜ì§€ ì•Šê³ , React ìì²´ì—ì„œ íŒíŠ¸ë¡œë§Œ ì‚¬ìš©ëœë‹¤. propsë¡œ í•„ìš”í•˜ë‹¤ë©´ ë³„ë„ì˜ propsë¡œ ì „ë‹¬í•´ì¤˜ì•¼ í•œë‹¤.

<CodeBlock lang='html'>
{`<Profile key={id} userId={id} />`}
</CodeBlock>

</Pitfall>

# ìš”ì•½

-   ìœ ì‚¬í•œ ì»´í¬ë„ŒíŠ¸ ì§‘í•©ì„ ìƒì„±í•˜ê¸° -> `map()`
-   ë°°ì—´ì—ì„œ ì•„ì´í…œì„ í•„í„°ë§ -> `filter()`
-   Reactê°€ ê° ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì í•  ìˆ˜ ìˆë„ë¡ `key` props í•„ìˆ˜!
