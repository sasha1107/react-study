import { DeepDive } from '@app/components/DeepDive';
import { Highlight } from '@app/components/Highlight';
import { CodeBlock } from '@app/components/CodeBlock';
import { Pitfall } from '@app/components/Pitfall';
import { RedCard } from '@app/components/RedCard';
import { WhiteCard } from '@app/components/WhiteCard';

# useOnClickOutside

ì´ í›„í¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì§€ì •ëœ ìš”ì†Œ ì™¸ë¶€ì˜ í´ë¦­ì„ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì œì—ì„œëŠ” ëª¨ë‹¬ ì™¸ë¶€ì˜ ìš”ì†Œë¥¼ í´ë¦­í•  ë•Œ ëª¨ë‹¬ì„ ë‹«ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤. 

ì´ ë…¼ë¦¬ë¥¼ í›„í¬ë¡œ ì¶”ìƒí™”í•˜ë©´ ì´ëŸ¬í•œ ì¢…ë¥˜ì˜ ê¸°ëŠ¥(ë“œë¡­ë‹¤ìš´ ë©”ë‰´, ë„êµ¬ ì„¤ëª… ë“±)ì´ í•„ìš”í•œ ëª¨ë“  êµ¬ì„± ìš”ì†Œì—ì„œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- - -

# useOnClickOutside.js

<CodeBlock lang='javascript'>
{`import { useEffect } from 'react';

function useOnClickOutside(ref, handler) {
    useEffect(
        () => {
            const listener = (event) => {
                // refì˜ ìš”ì†Œ ë˜ëŠ” í•˜ìœ„ ìš”ì†Œë¥¼ í´ë¦­í•˜ë©´ ì•„ë¬´ ì‘ì—…ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.
                if (!ref.current || ref.current.contains(event.target)) {
                    return;
                }
                handler(event);
            };

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë¶€ì°©
            document.addEventListener('mousedown', listener);
            document.addEventListener('touchstart', listener);

            // useEffectê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ë¶€ì°©ë˜ê³ , ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì¡ì•„ë¨¹ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— removeEventListenerë¥¼ í•´ì¤€ë‹¤.
            return () => {
                document.removeEventListener('mousedown', listener);
                document.removeEventListener('touchstart', listener);
            };
        },
        // Add ref and handler to effect dependencies
        // It's worth noting that because passed in handler is a new ...
        // ... function on every render that will cause this effect ...
        // ... callback/cleanup to run every render. It's not a big deal ...
        // ... but to optimize you can wrap handler in useCallback before ...
        // ... passing it into this hook.
        [ref, handler]
    );
}
export default useOnClickOutside;`}
</CodeBlock>

- - -

# ì‚¬ìš©

<CodeBlock lang='javascript'>
{`import useOnClickOutside from "./useOnClickOutside"

// Usage
function App() {
    // Create a ref that we add to the element for which we want to detect outside clicks
    const ref = useRef();
    // State for our modal
    const [isModalOpen, setModalOpen] = useState(false);
    // Call hook passing in the ref and a function to call on outside click
    useOnClickOutside(ref, () => setModalOpen(false));
    return (
        <div>
            {isModalOpen ? (
                <div ref={ref}>
                    ğŸ‘‹ Hey, I'm a modal. Click anywhere outside of me to close.
                </div>
            ) : (
                <button onClick={() => setModalOpen(true)}>Open Modal</button>
            )}
        </div>
    );
}`}
</CodeBlock>